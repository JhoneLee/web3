# 规范汇总

## 1 EIP-4844

EIP-4844（又称 "Proto-Danksharding"）是以太坊的一项提案，旨在通过引入 **Blob transactions**（大数据块交易）来提高网络的吞吐量和数据存储效率。它是以太坊扩容计划的一部分，目标是将链上的数据存储和传输成本大幅降低。

这种提案的核心是引入了新的交易类型：Blob transactions，即允许将大量数据（称为 blobs）上传到区块链上，这些数据将以低成本存储并在后期进行处理。

## 2 EIP-1559

EIP-1559 旨在改变交易费用的计算方式，使其更加透明、可预测，并且提高网络的效率。  
**总费用** = 基础费用 + 优先费用

- **动态调整交易费用**：通过引入 **基础费用**（base fee）和 **优先费用**（priority fee），使交易费用更加透明并动态调整，而不是完全依赖用户手动设置的费用。
- **减少交易费用波动**：通过自动调整基础费用，避免了以太坊网络在拥堵时用户过度支付高额费用的问题，提升了交易费用的可预测性。
- **燃烧部分费用**：通过将基础费用销毁（燃烧），减少以太坊的总供应量，从而为以太坊经济带来 **deflationary pressure**（通缩压力）。

通过上述改革，基础 Gas 费是系统根据当前网络压力自动计算出来的，用户无需关心，只需要设置一个总费用或单独设置优先费用即可，矿工会根据你的优先费用高低选择是否促成你的交易。将交易变得更加便捷和透明。

| **特性**                 | **没有 EIP-1559 之前**                         | **引入 EIP-1559 之后**                                       |
| ------------------------ | ---------------------------------------------- | ------------------------------------------------------------ |
| **费用的计算方式**       | 用户手动设置 Gas Price，依赖竞价机制           | 基础费用由协议自动计算，用户设置优先费用（小费）             |
| **费用的可预测性**       | 高度不可预测，特别是在网络拥堵时，费用波动很大 | 基础费用动态调整，优先费用由用户控制，费用更加透明和可预测   |
| **网络拥堵时的交易费用** | 费用暴涨，用户需要竞价来提高交易的优先级       | 通过自动调整基础费用，减少了费用波动，用户只需设置合适的小费 |
| **矿工收入**             | 矿工根据用户支付的 Gas 费用赚取收入            | 矿工根据用户设置的优先费用（小费）赚取收入，基础费用被销毁   |
| **是否解决通货膨胀**     | 没有机制减少以太坊供应量，长期通胀             | 基础费用会被销毁，起到通缩作用，减少以太坊总供应量           |

## 3 EIP-2930

**EIP-2930** 旨在引入 **访问列表**（Access List）的概念，主要解决以太坊交易在处理合约存储（storage）时的效率问题。其核心目的是优化交易费用，特别是针对那些需要频繁读取或修改合约存储的交易。

在没有 EIP-2930 之前，以太坊网络在处理某些合约调用时，存储访问的成本非常高，并且没有明确的方式告诉网络哪些存储槽会被访问，从而导致了不必要的开销。访问列表（Access List）让交易发起者可以明确告诉区块链：“这笔交易会访问哪些合约的存储槽。”通过这种方式，网络可以提前准备好这些存储槽，减少后续的访问费用。

## 4 EIP-1193

**EIP-1193** 是一个以太坊提供者接口标准，定义了浏览器扩展（如 MetaMask、Brave 或其他以太坊钱包扩展）如何与 Web 应用程序进行交互。该标准提供了一致的 API 以供 DApp（去中心化应用）访问和与区块链进行交互。

EIP-1193 标准允许浏览器注入一个提供者对象，该对象提供以下核心功能：

- 发送交易
- 获取账户信息
- 获取区块链网络的状态（如当前网络 ID、链 ID）
- 监听网络变化、账户变化等事件

最常见的实现是 MetaMask，它将 EIP-1193 标准的接口注入到浏览器中，允许 DApp 通过 `window.ethereum` 访问区块链。

## 5 EIP-191

**EIP-191** 规范描述了一个签名标准，用于在以太坊中安全地签名任意消息。它为消息签名提供了一个一致的格式，使得签名能够与特定的消息内容绑定，避免了签名被篡改或伪造。EIP-191 主要用于通过签名验证消息的真实性，且比传统的以太坊签名更加灵活。

- **消息与签名的绑定**：EIP-191 规定了一个标准化的格式，用于在签名中附加消息的前缀，确保签名只能与特定的消息内容相关联。这避免了例如用私钥签名一个数据后，其他人能修改数据内容后再签名的问题。
- **协议标识符**：在 EIP-191 中，消息签名中会添加一个协议标识符，表明消息采用的是 EIP-191 标准。这使得验证签名的过程中能够清楚地识别消息内容，并且确认签名的合法性。
- **签名结构**：标准要求签名者在签名数据时必须对数据进行特定的前缀处理。例如，标准会要求签名消息加上 `0x19` 或 `0x1b` 前缀，后面是消息的哈希值。这种格式的标准化可以帮助确保签名的正确性和一致性。

## 6 EIP-712

**EIP-712** 定义了如何将数据结构编码为以太坊签名，确保签名和消息的安全性及一致性。这个规范尤其在智能合约交互和去中心化应用（DApp）中，帮助实现消息的可靠签名验证。

- **结构化数据**：EIP-712 允许你使用结构化数据（如对象或数组）来进行签名，而不仅仅是简单的字符串。这样可以避免对每次签名的消息内容进行低级的编码，增强了安全性。
- **类型化消息**：消息被定义为具有特定类型的数据，这些类型可以通过智能合约或 DApp 预先定义。例如，消息可以包含一个交易的相关字段，如 “from”、“to”、“金额”等。
- **签名验证**：使用 EIP-712 签名的数据不仅保证了消息的完整性，而且可以在 Ethereum 区块链上验证签名，以确保消息没有被篡改。
- **结构化消息示例**：假设你有一个交易结构体 Transaction，它包含字段如 `from`, `to`, `amount` 等，EIP-712 会允许你将这些字段和类型描述为结构化的 JSON 数据，并对其签名。这样，你就能确保签名数据是符合预定格式的。

## 7 EIP-2718

原始的交易格式比较固定，只支持一种类型的交易（即 EIP-155 中定义的交易）。但随着以太坊功能的扩展，特别是对智能合约和数据结构的需求不断增长，原有的交易格式逐渐暴露出一些限制，尤其是对于支持新型交易和协议（如 EIP-4844 和未来的 EIP 提案）时，旧格式不够灵活。

**EIP-2718** 提出的目的是将交易格式进行扩展和类型化，以便以后可以轻松地引入新的交易类型，而无需更改整个交易结构。

EIP-2718 定义了一个 **“类型化交易封装”**，它允许每笔交易携带一个类型标识符（type identifier），使得每笔交易都可以明确地知道它属于哪种类型。这种类型化的结构使得以太坊能够在不破坏现有交易结构的基础上，添加新的交易类型。

- 类型 0（Legacy Transaction）：传统的交易类型，符合现有的 EIP-155 规范。
- 类型 1（EIP-2930 Transaction）：引入了访问列表（access list）的交易类型，目的是提高交易执行效率，减少高 Gas 费用。
- 类型 2（EIP-1559 Transaction）：支持 EIP-1559 的交易类型，引入了动态 base fee 和 max fee 机制，并改善了以太坊的 Gas 费用市场。
- 类型 3（EIP-4844 Transaction）：支持 Blob 数据和侧链交易的类型，旨在提高以太坊的扩展性和吞吐量，具体
